<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Protocol used in communication between the layer and the internal proxy. This protocol does not have to be backwards compatible and can be changed freely, as the internal proxy and the layer are shipped together in a single binary."><title>mirrord_intproxy::protocol - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-47e7ab555ef2818a.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="mirrord_intproxy" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0-nightly (e3abbd499 2023-09-06)" data-channel="nightly" data-search-js="search-5d3eaacf19ebf04f.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-f194925aa375ae96.css" data-theme-dark-css="dark-1dd4d1ce031e15de.css" data-theme-ayu-css="ayu-49e58d069f567085.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../static.files/main-ef3a2de404864b0b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-f194925aa375ae96.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1dd4d1ce031e15de.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../mirrord_intproxy/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../mirrord_intproxy/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module protocol</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">mirrord_intproxy</a>::<wbr><a class="mod" href="#">protocol</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/mirrord_intproxy/protocol.rs.html#1-396">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Protocol used in communication between the layer and the internal proxy.
This protocol does not have to be backwards compatible and can be changed freely, as the
internal proxy and the layer are shipped together in a single binary.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="macros/index.html" title="mod mirrord_intproxy::protocol::macros">macros</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Utility macros for implementing traits on <a href="index.html" title="mod mirrord_intproxy::protocol"><code>protocol</code></a> types.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ConnMetadataRequest.html" title="struct mirrord_intproxy::protocol::ConnMetadataRequest">ConnMetadataRequest</a></div><div class="desc docblock-short">A request for additional metadata for accepted connection.
The layer should use this each time it accepts a connection on a socket that is listening for
mirrored connections (<a href="struct.PortSubscribe.html" title="struct mirrord_intproxy::protocol::PortSubscribe"><code>PortSubscribe</code></a>).</div></li><li><div class="item-name"><a class="struct" href="struct.ConnMetadataResponse.html" title="struct mirrord_intproxy::protocol::ConnMetadataResponse">ConnMetadataResponse</a></div><div class="desc docblock-short">A response to layerâ€™s <a href="struct.ConnMetadataRequest.html" title="struct mirrord_intproxy::protocol::ConnMetadataRequest"><code>ConnMetadataRequest</code></a>.
Contains metadata useful for hooking <code>getsockname</code> and <code>getpeername</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.LayerId.html" title="struct mirrord_intproxy::protocol::LayerId">LayerId</a></div><div class="desc docblock-short">Unique <code>layer &lt;-&gt; proxy</code> session identifier.
New connection is established when the layer initializes or forks.</div></li><li><div class="item-name"><a class="struct" href="struct.LocalMessage.html" title="struct mirrord_intproxy::protocol::LocalMessage">LocalMessage</a></div><div class="desc docblock-short">A wrapper for messages sent through the <code>layer &lt;-&gt; proxy</code> connection.</div></li><li><div class="item-name"><a class="struct" href="struct.OutgoingConnectRequest.html" title="struct mirrord_intproxy::protocol::OutgoingConnectRequest">OutgoingConnectRequest</a></div><div class="desc docblock-short">A request to initiate a new outgoing connection.</div></li><li><div class="item-name"><a class="struct" href="struct.OutgoingConnectResponse.html" title="struct mirrord_intproxy::protocol::OutgoingConnectResponse">OutgoingConnectResponse</a></div><div class="desc docblock-short">A response to layerâ€™s <a href="struct.OutgoingConnectRequest.html" title="struct mirrord_intproxy::protocol::OutgoingConnectRequest"><code>OutgoingConnectRequest</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.PortSubscribe.html" title="struct mirrord_intproxy::protocol::PortSubscribe">PortSubscribe</a></div><div class="desc docblock-short">A request to start proxying incoming connections.</div></li><li><div class="item-name"><a class="struct" href="struct.PortUnsubscribe.html" title="struct mirrord_intproxy::protocol::PortUnsubscribe">PortUnsubscribe</a></div><div class="desc docblock-short">A request to stop proxying incoming connections.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.IncomingRequest.html" title="enum mirrord_intproxy::protocol::IncomingRequest">IncomingRequest</a></div><div class="desc docblock-short">Requests related to incoming connections.</div></li><li><div class="item-name"><a class="enum" href="enum.IncomingResponse.html" title="enum mirrord_intproxy::protocol::IncomingResponse">IncomingResponse</a></div><div class="desc docblock-short">A response to layerâ€™s <a href="enum.IncomingRequest.html" title="enum mirrord_intproxy::protocol::IncomingRequest"><code>IncomingRequest</code></a>.</div></li><li><div class="item-name"><a class="enum" href="enum.LayerToProxyMessage.html" title="enum mirrord_intproxy::protocol::LayerToProxyMessage">LayerToProxyMessage</a></div><div class="desc docblock-short">Messages sent by the layer and handled by the internal proxy.</div></li><li><div class="item-name"><a class="enum" href="enum.NetProtocol.html" title="enum mirrord_intproxy::protocol::NetProtocol">NetProtocol</a></div><div class="desc docblock-short">Supported network protocols when intercepting outgoing connections.</div></li><li><div class="item-name"><a class="enum" href="enum.NewSessionRequest.html" title="enum mirrord_intproxy::protocol::NewSessionRequest">NewSessionRequest</a></div><div class="desc docblock-short">A layerâ€™s request to start a new session with the internal proxy.
Contains info about layerâ€™s state.
This should be the first message sent by the layer after opening a new connection to the
internal proxy.</div></li><li><div class="item-name"><a class="enum" href="enum.PortSubscription.html" title="enum mirrord_intproxy::protocol::PortSubscription">PortSubscription</a></div><div class="desc docblock-short">Instructions for the internal proxy and the agent on how to execute port mirroring.</div></li><li><div class="item-name"><a class="enum" href="enum.ProxyToLayerMessage.html" title="enum mirrord_intproxy::protocol::ProxyToLayerMessage">ProxyToLayerMessage</a></div><div class="desc docblock-short">Messages sent by the internal proxy and handled by the layer.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.IsLayerRequest.html" title="trait mirrord_intproxy::protocol::IsLayerRequest">IsLayerRequest</a></div><div class="desc docblock-short">A helper trait for <code>layer -&gt; proxy</code> requests.</div></li><li><div class="item-name"><a class="trait" href="trait.IsLayerRequestWithResponse.html" title="trait mirrord_intproxy::protocol::IsLayerRequestWithResponse">IsLayerRequestWithResponse</a></div><div class="desc docblock-short">A helper trait for <code>layer -&gt; proxy</code> requests that require a response from the proxy.
Not all layer requests require a response, e.g.
<a href="../../mirrord_protocol/file/struct.CloseFileRequest.html" title="struct mirrord_protocol::file::CloseFileRequest"><code>CloseFileRequest</code></a>.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Aliases</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.MessageId.html" title="type mirrord_intproxy::protocol::MessageId">MessageId</a></div><div class="desc docblock-short">An identifier for a message sent from the layer to the internal proxy.
The layer uses this to match proxy responses with awaiting requests.</div></li></ul></section></div></main></body></html>