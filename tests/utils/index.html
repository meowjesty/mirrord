<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `utils` mod in crate `tests`."><title>tests::utils - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-47e7ab555ef2818a.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="tests" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.0-nightly (e3abbd499 2023-09-06)" data-channel="nightly" data-search-js="search-5d3eaacf19ebf04f.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-f194925aa375ae96.css" data-theme-dark-css="dark-1dd4d1ce031e15de.css" data-theme-ayu-css="ayu-49e58d069f567085.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../static.files/main-ef3a2de404864b0b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-f194925aa375ae96.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1dd4d1ce031e15de.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../tests/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../tests/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module utils</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">tests</a>::<wbr><a class="mod" href="#">utils</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/tests/utils.rs.html#1-1094">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.KubeService.html" title="struct tests::utils::KubeService">KubeService</a></div><div class="desc docblock-short">A service deployed to the kubernetes cluster.
Service is meant as in â€œMicroserviceâ€, not as in the Kubernetes resource called Service.
This includes a Deployment resource, a Service resource and optionally a Namespace.</div></li><li><div class="item-name"><a class="struct" href="struct.ResourceGuard.html" title="struct tests::utils::ResourceGuard">ResourceGuard</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">RAII-style guard for deleting kube resources after tests.
This guard deletes the kube resource when dropped.
This guard can be configured not to delete the resource if dropped during a panic.</div></li><li><div class="item-name"><a class="struct" href="struct.TestProcess.html" title="struct tests::utils::TestProcess">TestProcess</a></div></li><li><div class="item-name"><a class="struct" href="struct.config_dir.html" title="struct tests::utils::config_dir">config_dir</a></div></li><li><div class="item-name"><a class="struct" href="struct.hostname_service.html" title="struct tests::utils::hostname_service">hostname_service</a></div></li><li><div class="item-name"><a class="struct" href="struct.http2_service.html" title="struct tests::utils::http2_service">http2_service</a></div></li><li><div class="item-name"><a class="struct" href="struct.kube_client.html" title="struct tests::utils::kube_client">kube_client</a></div></li><li><div class="item-name"><a class="struct" href="struct.pause_services.html" title="struct tests::utils::pause_services">pause_services</a></div></li><li><div class="item-name"><a class="struct" href="struct.random_namespace_self_deleting_service.html" title="struct tests::utils::random_namespace_self_deleting_service">random_namespace_self_deleting_service</a></div></li><li><div class="item-name"><a class="struct" href="struct.service.html" title="struct tests::utils::service">service</a></div></li><li><div class="item-name"><a class="struct" href="struct.tcp_echo_service.html" title="struct tests::utils::tcp_echo_service">tcp_echo_service</a></div></li><li><div class="item-name"><a class="struct" href="struct.udp_logger_service.html" title="struct tests::utils::udp_logger_service">udp_logger_service</a></div></li><li><div class="item-name"><a class="struct" href="struct.websocket_service.html" title="struct tests::utils::websocket_service">websocket_service</a></div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Application.html" title="enum tests::utils::Application">Application</a></div></li><li><div class="item-name"><a class="enum" href="enum.EnvApp.html" title="enum tests::utils::EnvApp">EnvApp</a></div></li><li><div class="item-name"><a class="enum" href="enum.FileOps.html" title="enum tests::utils::FileOps">FileOps</a></div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.CONTAINER_NAME.html" title="constant tests::utils::CONTAINER_NAME">CONTAINER_NAME</a></div></li><li><div class="item-name"><a class="constant" href="constant.PRESERVE_FAILED_ENV_NAME.html" title="constant tests::utils::PRESERVE_FAILED_ENV_NAME">PRESERVE_FAILED_ENV_NAME</a></div><div class="desc docblock-short">Name of the environment variable used to control cleanup after failed tests.
By default, resources from failed tests are deleted.
However, if this variable is set, resources will always be preserved.</div></li><li><div class="item-name"><a class="constant" href="constant.TEST_RESOURCE_LABEL.html" title="constant tests::utils::TEST_RESOURCE_LABEL">TEST_RESOURCE_LABEL</a></div><div class="desc docblock-short">All Kubernetes resources created for testing purposes share this label.</div></li><li><div class="item-name"><a class="constant" href="constant.TEXT.html" title="constant tests::utils::TEXT">TEXT</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.config_dir.html" title="fn tests::utils::config_dir">config_dir</a></div></li><li><div class="item-name"><a class="fn" href="fn.format_time.html" title="fn tests::utils::format_time">format_time</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Returns string with time format of hh:mm:ss</div></li><li><div class="item-name"><a class="fn" href="fn.get_instance_name.html" title="fn tests::utils::get_instance_name">get_instance_name</a></div><div class="desc docblock-short">Returns a name of any pod/deployment belonging to the given app.</div></li><li><div class="item-name"><a class="fn" href="fn.get_service_host_and_port.html" title="fn tests::utils::get_service_host_and_port">get_service_host_and_port</a></div></li><li><div class="item-name"><a class="fn" href="fn.get_service_url.html" title="fn tests::utils::get_service_url">get_service_url</a></div></li><li><div class="item-name"><a class="fn" href="fn.hostname_service.html" title="fn tests::utils::hostname_service">hostname_service</a></div><div class="desc docblock-short">Service that listens on port 80 and returns â€œremote: <DATA>â€ when getting â€œ<DATA>â€ directly
over TCP, not HTTP.</div></li><li><div class="item-name"><a class="fn" href="fn.http2_service.html" title="fn tests::utils::http2_service">http2_service</a></div></li><li><div class="item-name"><a class="fn" href="fn.kube_client.html" title="fn tests::utils::kube_client">kube_client</a></div></li><li><div class="item-name"><a class="fn" href="fn.pause_services.html" title="fn tests::utils::pause_services">pause_services</a></div><div class="desc docblock-short">Initiailizes the services needed for pause testing.
Returns the requester service, the logger service</div></li><li><div class="item-name"><a class="fn" href="fn.random_namespace_self_deleting_service.html" title="fn tests::utils::random_namespace_self_deleting_service">random_namespace_self_deleting_service</a></div></li><li><div class="item-name"><a class="fn" href="fn.random_string.html" title="fn tests::utils::random_string">random_string</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Creates a random string of 7 alphanumeric lowercase characters.</div></li><li><div class="item-name"><a class="fn" href="fn.resolve_node_host.html" title="fn tests::utils::resolve_node_host">resolve_node_host</a></div></li><li><div class="item-name"><a class="fn" href="fn.run_exec.html" title="fn tests::utils::run_exec">run_exec</a></div><div class="desc docblock-short">Run <code>mirrord exec</code> with the given cmd, optional target (<code>None</code> for targetless), namespace,
mirrord args, and env vars.</div></li><li><div class="item-name"><a class="fn" href="fn.run_exec_targetless.html" title="fn tests::utils::run_exec_targetless">run_exec_targetless</a></div><div class="desc docblock-short">Run <code>mirrord exec</code> without specifying a target, to run in targetless mode.</div></li><li><div class="item-name"><a class="fn" href="fn.run_exec_with_target.html" title="fn tests::utils::run_exec_with_target">run_exec_with_target</a></div><div class="desc docblock-short">See <a href="fn.run_exec.html" title="fn tests::utils::run_exec"><code>run_exec</code></a>.</div></li><li><div class="item-name"><a class="fn" href="fn.run_ls.html" title="fn tests::utils::run_ls">run_ls</a></div><div class="desc docblock-short">Runs <code>mirrord ls</code> command and asserts if the json matches the expected format</div></li><li><div class="item-name"><a class="fn" href="fn.run_mirrord.html" title="fn tests::utils::run_mirrord">run_mirrord</a></div></li><li><div class="item-name"><a class="fn" href="fn.run_verify_config.html" title="fn tests::utils::run_verify_config">run_verify_config</a></div><div class="desc docblock-short">Runs <code>mirrord verify-config [--ide] &quot;/path/config.json&quot;</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.send_request.html" title="fn tests::utils::send_request">send_request</a></div><div class="desc docblock-short">Take a request builder of any method, add headers, send the request, verify success, and
optionally verify expected response.</div></li><li><div class="item-name"><a class="fn" href="fn.send_requests.html" title="fn tests::utils::send_requests">send_requests</a></div></li><li><div class="item-name"><a class="fn" href="fn.service.html" title="fn tests::utils::service">service</a></div><div class="desc docblock-short">Create a new <a href="struct.KubeService.html" title="struct tests::utils::KubeService"><code>KubeService</code></a> and related Kubernetes resources. The resources will be deleted
when the returned service is dropped, unless it is dropped during panic.
This behavior can be changed, see [<code>FORCE_CLEANUP_ENV_NAME</code>].</div></li><li><div class="item-name"><a class="fn" href="fn.tcp_echo_service.html" title="fn tests::utils::tcp_echo_service">tcp_echo_service</a></div><div class="desc docblock-short">Service that listens on port 80 and returns â€œremote: <DATA>â€ when getting â€œ<DATA>â€ directly
over TCP, not HTTP.</div></li><li><div class="item-name"><a class="fn" href="fn.udp_logger_service.html" title="fn tests::utils::udp_logger_service">udp_logger_service</a></div><div class="desc docblock-short">Service that should only be reachable from inside the cluster, as a communication partner
for testing outgoing traffic. If this service receives the applicationâ€™s messages, they
must have been intercepted and forwarded via the agent to be sent from the impersonated pod.</div></li><li><div class="item-name"><a class="fn" href="fn.watch_resource_exists.html" title="fn tests::utils::watch_resource_exists">watch_resource_exists</a></div></li><li><div class="item-name"><a class="fn" href="fn.websocket_service.html" title="fn tests::utils::websocket_service">websocket_service</a></div><div class="desc docblock-short"><a href="https://github.com/metalbear-co/test-images/blob/main/websocket/app.mjs">Service</a>
that listens on port 80 and returns â€œremote: <DATA>â€ when getting â€œ<DATA>â€ over a websocket
connection, allowing us to test HTTP upgrade requests.</div></li></ul></section></div></main></body></html>